<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nndi.client.classes.ClasspaymentMapper">

 <!-- 마이페이지 수강 강좌 조회 매퍼 --> 
     <resultMap type="com.nndi.model.joindto.client.ClassAndClasspaymentDTO" id="MPclass">
     		<id property="clsNum" column="CLS_NUM"/>
     		<result property="clsName" column="CLS_NAME"/>
     		<result property="clsStartDay" column="CLS_START_DAY"/>
     </resultMap>     
     
<!-- 수강 신청용 -->
<insert parameterType="com.nndi.model.commondto.ClassMemberDTO" id="classmemberinsert">
  INSERT
		  INTO TBL_CLASS_MEMBER
		(
		  ID
		, CLS_NUM
		, REFUND_YN
		)
		VALUES
		(
		  #{id}
		, #{clsNum}
		, 'N'
		)
</insert>

<!-- 수강 신청용2 -->
<insert parameterType="com.nndi.model.commondto.ClassPaymentDTO" id="classpaymentinsert">
   INSERT
		  INTO TBL_CLASS_PAYMENT
		(
		  ID
		, CLS_NUM
		, CLS_PRICE
		, CLS_PAY_DAY
		, CLS_PAY_YN
		, CLS_PAY_TYPE
		)
		VALUES
		(
		  #{id}
		, #{clsNum}
		, #{clsPrice}
		, SYSDATE
		, 'Y'
		, '무통장 입금'
		)
</insert>

<!-- 마이페이지 강좌 조회용  -->
<select id="MypageclassList" resultMap="MPclass">
	SELECT 
	       A.CLS_NUM     
	     , B.CLS_NAME  
	     , B.CLS_START_DAY  
	  FROM TBL_CLASS_PAYMENT A
	  JOIN TBL_CLASS B ON (A.CLS_NUM = B.CLS_NUM)
</select>
</mapper>