<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nndi.client.member_info.book.MemberBookRentMapper">

	<!-- MemberAlive ResultMap, typeAlias = AliveDTO -->
	<resultMap type="AliveDTO" id="memberAliveResultMap">
		<id property="id" column="ID"/>
		<result property="idQueNum" column="ID_QUE_NUM"/>
		<result property="phone1" column="PHONE1"/>
		<result property="phone2" column="PHONE2"/>
		<result property="phone3" column="PHONE3"/>
		<result property="email1" column="EMAIL1"/>
		<result property="email2" column="EMAIL2"/>
		<result property="address1" column="ADDRESS1"/>
		<result property="address2" column="ADDRESS2"/>
		<result property="address3" column="ADDRESS3"/>
		<result property="pwd" column="PWD"/>
		<result property="name" column="NAME"/>
		<result property="birth" column="BIRTH"/>
		<result property="idAnswer" column="ID_ANSWER"/>
		<result property="gender" column="GENDER"/>
		<result property="lastLogin" column="LAST_LOGIN"/>
		<result property="userStatus" column="USER_STATUS"/>
		<result property="outDate" column="OUT_DATE"/>
		<result property="enrollDate" column="ENROLL_DATE"/>
	</resultMap>
	
	<!-- BookRentDTO ReulstMap, typeAlias="BookRentDTO -->
	<resultMap type="BookRentDTO" id="BookRentResultMap">
		<id property="rentNum" column="RENT_NUM"/>
		<result property="code" column="CODE"/>
		<result property="memId" column="MEM_ID"/>
		<result property="rentDate" column="RENT_DATE"/>
		<result property="returnDate" column="RETURN_DATE"/>
		<result property="rentYn" column="RENT_YN"/>
	</resultMap>
	
	<!-- MemberBookRentDTO ReulstMap, typeAlias="MemberAndBookRentDTO -->
	<resultMap type="MemberAndBookRentDTO" id="MemberBookRentResult">
		<id property="rentNum" column="RENT_NUM"/>
		<result property="code" column="CODE"/>
		<result property="memId" column="MEM_ID"/>
		<result property="rentDate" column="RENT_DATE"/>
		<result property="returnDate" column="RETURN_DATE"/>
		<result property="rentYn" column="RENT_YN"/>
	  	<association property="member" resultMap="memberAliveResultMap"/>
	</resultMap>
	
 	<select id="selectBookRentList" resultMap="BookRentResultMap">
		SELECT
			   A.RENT_NUM
			 , A.CODE
			 , A.MEM_ID
			 , A.RENT_DATE
			 , A.RETURN_DATE
			 , A.RENT_YN  	 
		  FROM TBL_BOOK_RENT A
		   WHERE RETURN_DATE IS NULL 
	</select> 

</mapper>
